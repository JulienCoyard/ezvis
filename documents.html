{% extends "layout.html" %}

{% block content %}
<div class="panel-body">
  <div class="table-responsive">
    <table class="table table-striped table-bordered table-hover" id="dataTables-documents">
      <thead>
        <tr>
{% for id, field in config.customFields %}
  {% if field.public %}
          <th>{{ field.label }}</th>
  {% endif %}
{% endfor %}
        </tr>
      </thead>
    </table>
  </div>
</div>

{% endblock %}


{% block scripts %}
<script>
$(document).ready(function() {
  
{% set itemsPerPage = config.itemsPerPage if config.itemsPerPage else 0 %}
  $('#dataTables-documents').dataTable({
    ordering: true,
    serverSide: true,
    ajax: "/browse.json",
    lengthMenu: [{{ itemsPerPage }}||5,10,25,50,100],
    columns: [
{% for id, field in config.customFields %}
  {% if field.public %}
      { data: '{{ field.path }}' },
  {% endif %}
{% endfor %}
  ]
  });

{% if config.dashboard %}
  // Create links in charts navbar
{% for id, chart in config.dashboard.charts %}
  $('#charts-list')
  .append('<li>' +
          '     <a href="chart.html?id={{id}}">{{chart.title}}</a>' +
          '</li>');

{% endfor %}
{% endif %}

});
</script>
{% endblock %}

